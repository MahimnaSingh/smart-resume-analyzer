<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Smart Resume Analyzer</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 0; background: #0b0d10; color: #e6edf3; }
    .wrap { max-width: 720px; margin: 40px auto; padding: 24px; background: #11151a; border-radius: 16px; box-shadow: 0 6px 24px rgba(0,0,0,.25); }
    h1 { margin: 0 0 8px; }
    p.mono { color:#9fb0c0; font: 12px/1.2 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
    .card { border: 1px solid #1f2937; border-radius: 12px; padding: 16px; margin-top: 16px; background:#0e1318; }
    button { padding: 10px 16px; border-radius: 10px; border: 0; cursor: pointer; background: #2563eb; color: white; font-weight: 600; }
    input[type=file] { padding: 10px; border: 1px dashed #334155; border-radius: 10px; width: 100%; background:#0b0f14; color:#e6edf3; }
    pre { white-space: pre-wrap; word-break: break-word; background:#0b0f14; padding:12px; border-radius:10px; }
    .row { display:flex; gap:12px; align-items:center; }
    .row > * { flex: 1; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Smart Resume Analyzer</h1>
    <p class="mono">Upload a .pdf or .txt resume. Weâ€™ll extract text and do a tiny keyword scan.</p>

    <div class="card">
      <form id="form">
        <div class="row">
          <input id="file" type="file" accept=".pdf,.txt" required />
          <button type="submit">Analyze</button>
        </div>
      </form>
      <div id="status" class="mono" style="margin-top:10px;"></div>
    </div>

    <div class="card" id="result" style="display:none;">
      <h3>Result</h3>
      <pre id="json"></pre>
    </div>
  </div>

  <script>
    const form = document.getElementById('form');
    const fileInput = document.getElementById('file');
    const statusEl = document.getElementById('status');
    const result = document.getElementById('result');
    const jsonEl = document.getElementById('json');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const f = fileInput.files[0];
      if (!f) { alert('Pick a file'); return; }

      statusEl.textContent = 'Uploading...';
      result.style.display = 'none';

      const fd = new FormData();
      fd.append('file', f);

      try {
        // IMPORTANT: our Flask function is api/index.py so routes live under /api/index/*
        const res = await fetch('/api/index/analyze', { method: 'POST', body: fd });
        const data = await res.json();
        if (!res.ok || !data.ok) {
          throw new Error((data && (data.error || data.message)) || ('HTTP ' + res.status));
        }
        statusEl.textContent = 'Done.';
        jsonEl.textContent = JSON.stringify(data, null, 2);
        result.style.display = 'block';
      } catch (err) {
        statusEl.textContent = 'Error: ' + err.message;
        result.style.display = 'none';
      }
    });
  </script>
</body>
</html>
